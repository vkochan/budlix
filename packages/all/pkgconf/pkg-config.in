#!/bin/sh

set -e

PKGCONFDIR=$(dirname $0)
DEFAULT_PKG_CONFIG_LIBDIR=${STAGING_DIR}/usr/lib/pkgconfig:${STAGING_DIR}/usr/share/pkgconfig
DEFAULT_PKG_CONFIG_SYSROOT_DIR=${STAGING_DIR}
DEFAULT_PKG_CONFIG_SYSTEM_INCLUDE_PATH=${STAGING_DIR}/usr/include
DEFAULT_PKG_CONFIG_SYSTEM_LIBRARY_PATH=${STAGING_DIR}/usr/lib

PKG_CONFIG_LIBDIR=${PKG_CONFIG_LIBDIR:-${DEFAULT_PKG_CONFIG_LIBDIR}} \
	PKG_CONFIG_SYSROOT_DIR=${PKG_CONFIG_SYSROOT_DIR:-${DEFAULT_PKG_CONFIG_SYSROOT_DIR}} \
	PKG_CONFIG_SYSTEM_INCLUDE_PATH=${PKG_CONFIG_SYSTEM_INCLUDE_PATH:-${DEFAULT_PKG_CONFIG_SYSTEM_INCLUDE_PATH}} \
	PKG_CONFIG_SYSTEM_LIBRARY_PATH=${PKG_CONFIG_SYSTEM_LIBRARY_PATH:-${DEFAULT_PKG_CONFIG_SYSTEM_LIBRARY_PATH}} \
	exec ${PKGCONFDIR}/pkgconf --keep-system-libs @STATIC@ "$@"
